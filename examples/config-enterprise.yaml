# Enterprise configuration with multiple remote servers and multi-channel notifications
# For production environments requiring high reliability and comprehensive alerting

ups:
  name: "UPS@ups-server.local"
  check_interval: 1
  max_stale_data_tolerance: 5

triggers:
  low_battery_threshold: 30
  critical_runtime_threshold: 1200
  depletion:
    window: 300
    critical_rate: 10.0
    grace_period: 120
  extended_time:
    enabled: true
    threshold: 900

behavior:
  dry_run: false

logging:
  file: "/var/log/ups-monitor.log"

# ==============================================================================
# NOTIFICATIONS (via Apprise)
# ==============================================================================
# Enterprise setup with multiple notification channels for redundancy
# See: https://github.com/caronc/apprise/wiki
notifications:
  # Identify the datacenter/location in notification titles
  title: "üè¢ DC1 Primary UPS"

  # Corporate branding
  avatar_url: "https://company.example.com/assets/ups-icon.png"

  # Timeout for each notification attempt
  timeout: 15

  # Seconds between retry attempts for failed notifications (default: 5)
  retry_interval: 5

  urls:
  # Primary: Slack - Operations channel
  - "slack://xoxb-token/CHANNEL_ID?footer=no"

  # Secondary: PagerDuty - Critical alerts
  # - "pagerduty://INTEGRATION_KEY@ROUTING_KEY"

  # Tertiary: Email - Infrastructure team distribution list
  - "mailto://ups-alerts:password@smtp.company.com?to=infrastructure@company.com"
  # Backup: Microsoft Teams - IT Operations team
  # - "msteams://TEAM_TOKEN_A/TEAM_TOKEN_B/TEAM_TOKEN_C"

  # Monitoring: Splunk HEC for log aggregation
  # - "splunk://HEC_TOKEN@splunk.company.com:8088/services/collector"

  # On-call: Opsgenie
  # - "opsgenie://API_KEY/TEAM_ID"

virtual_machines:
  enabled: true
  max_wait: 120

# Container Runtime (Docker/Podman)
containers:
  enabled: true
  runtime: "podman"
  stop_timeout: 90
  # For Podman: also stop rootless user containers
  include_user_containers: true

filesystems:
  sync_enabled: true
  unmount:
    enabled: true
    timeout: 30
    mounts:
    - "/mnt/storage1"
    - "/mnt/storage2"
    - path: "/mnt/nfs-share"
      options: "-l"

remote_servers:
- name: "Primary NAS"
  enabled: true
  host: "nas1.local"
  user: "admin"
  shutdown_command: "sudo -i synoshutdown -s"

- name: "Backup NAS"
  enabled: true
  host: "nas2.local"
  user: "admin"
  shutdown_command: "sudo -i synoshutdown -s"

- name: "Database Server"
  enabled: true
  host: "db.local"
  user: "root"
  shutdown_command: "sudo shutdown -h now"

- name: "Application Server"
  enabled: true
  host: "app.local"
  user: "root"
  shutdown_command: "sudo shutdown -h now"

local_shutdown:
  enabled: true
  command: "shutdown -h now"
  message: "Eneru emergency shutdown"
